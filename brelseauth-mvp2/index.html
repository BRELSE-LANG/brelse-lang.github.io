<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BrelseAuth â€“ Tactile Authentication</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .dot {
      width: 16px;
      height: 16px;
      border-radius: 9999px;
      margin: 4px;
    }
    .dot.filled { background-color: black; }
    .dot.empty { background-color: #d1d5db; }
    .morse-char {
      font-size: 24px;
      margin: 0 4px;
    }
  </style>
</head>
<body class="bg-gray-100 text-gray-800 p-6 min-h-screen flex flex-col items-center">

  <h1 class="text-2xl font-bold mb-4 flex items-center gap-2">
    <i data-lucide="shield-lock" class="w-6 h-6"></i> BrelseAuth: Tactile Verification
  </h1>

  <div class="bg-white p-6 rounded-lg shadow max-w-md w-full mb-6">
    <label for="inputCode" class="block font-medium mb-2">Enter Code (Braille + Morse)</label>
    <textarea id="inputCode" rows="3" class="w-full p-3 border rounded mb-4" placeholder="e.g. A: 100000 | .-"></textarea>
    
    <div class="flex gap-2">
      <button onclick="generateOTP()" class="flex-1 bg-black text-white px-4 py-2 rounded hover:bg-gray-800 transition">Generate OTP</button>
      <button onclick="verifyOTP()" class="flex-1 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">Verify</button>
    </div>

    <div class="mt-4 flex gap-2">
      <button onclick="playMorse()" class="w-full bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition">ðŸ”Š Play Morse</button>
    </div>
  </div>

  <!-- Output -->
  <div id="output" class="text-center text-lg font-mono bg-white px-6 py-4 rounded shadow w-full max-w-md mb-4"></div>

  <!-- Tactile Keypad -->
  <div class="bg-white p-6 rounded-lg shadow max-w-md w-full mt-4">
    <h2 class="text-lg font-semibold mb-3">Braille & Morse Keypad</h2>
    <div class="grid grid-cols-6 gap-2 mb-4">
      "abcdefghijklmnopqrstuvwxyz".split("").forEach(ch => {
        document.write(`<button onclick="appendChar('${ch}')" class="bg-gray-200 hover:bg-gray-300 px-2 py-1 rounded text-sm">${ch.toUpperCase()}</button>`);
      });
    </div>
    <button onclick="clearInput()" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition w-full">Clear</button>
  </div>

  <script>
    const brailleMap = {
      a: "100000", b: "101000", c: "110000", d: "110100", e: "100100",
      f: "111000", g: "111100", h: "101100", i: "011000", j: "011100",
      k: "100010", l: "101010", m: "110010", n: "110110", o: "100110",
      p: "111010", q: "111110", r: "101110", s: "011010", t: "011110",
      u: "100011", v: "101011", w: "011101", x: "110011", y: "110111", z: "100111",
      ' ': "000000"
    };

    const morseMap = {
      a: ".-", b: "-...", c: "-.-.", d: "-..", e: ".",
      f: "..-.", g: "--.", h: "....", i: "..", j: ".---",
      k: "-.-", l: ".-..", m: "--", n: "-.", o: "---",
      p: ".--.", q: "--.-", r: ".-.", s: "...", t: "-",
      u: "..-", v: "...-", w: ".--", x: "-..-", y: "-.--", z: "--..",
      ' ': "/"
    };

    function generateOTP() {
      const text = document.getElementById("inputCode").value.toLowerCase().trim();
      let output = "";
      for (let ch of text) {
        if (brailleMap[ch]) {
          output += `${ch.toUpperCase()}: ${brailleMap[ch]} | ${morseMap[ch]}\n`;
        }
      }
      document.getElementById("output").innerText = output;
    }

    function verifyOTP() {
      const input = document.getElementById("inputCode").value;
      if (input.trim() === "") {
        alert("Enter a code first!");
        return;
      }
      alert("âœ… Verified Successfully!");
    }

    function playMorse() {
      const context = new AudioContext();
      const unit = 0.1;
      const frequency = 600;
      let time = context.currentTime;
      const input = document.getElementById("inputCode").value.toLowerCase();
      
      for (let ch of input) {
        const morse = morseMap[ch];
        if (!morse) continue;
        for (let symbol of morse) {
          if (symbol === ".") beep(unit);
          else if (symbol === "-") beep(unit * 3);
          time += unit * 1.5;
        }
        time += unit * 2;
      }

      function beep(duration) {
        const osc = context.createOscillator();
        const gain = context.createGain();
        osc.connect(gain);
        gain.connect(context.destination);
        osc.frequency.value = frequency;
        osc.start(time);
        osc.stop(time + duration);
        time += duration + 0.05;
      }
    }

    function appendChar(ch) {
      const input = document.getElementById("inputCode");
      input.value += ch;
    }

    function clearInput() {
      document.getElementById("inputCode").value = "";
      document.getElementById("output").innerText = "";
    }

    lucide.createIcons();
  </script>
</body>
  </html>
